import{r as j,j as e,u as S,l as x}from"./index-BIA1xUYG.js";import{C as R,b as N,c as k,a as F,B as v}from"./card-erQ205Yh.js";import{I as f,T as L}from"./textarea-CgO6dm0w.js";import*as P from"@radix-ui/react-label";import{c as D}from"./utils-CWs4mQ9_.js";import{S as T,a as E,b as I,c as b,d as h}from"./select-DLMUyWl_.js";import"./chevron-down-C4y0rHe_.js";import"./index-Ce2nsNoN.js";const g="https://api.stackmint.in";function U(){return localStorage.getItem("authToken")}async function C(a,l={}){const t=U();console.log("API Request:",{url:`${g}${a}`,token:t?"Present":"Missing",options:l});const i={"Content-Type":"application/json",...t&&{Authorization:t},...l.headers};try{const r=await fetch(`${g}${a}`,{...l,headers:i});if(!r.ok){const n=await r.text();console.error("API Error Response:",{status:r.status,statusText:r.statusText,path:a,error:n});let p="API Error";try{p=JSON.parse(n).message||n}catch{p=n||r.statusText}throw new Error(`${p} (Status: ${r.status})`)}return r.json()}catch(r){throw console.error("API Request Failed:",{path:a,error:r.message,stack:r.stack}),r}}const M=async a=>C("/v1/developers",{method:"POST",body:JSON.stringify(a)}),O=async(a,l)=>{const t=new FormData;return t.append("file",a),t.append("type",l),C("/v1/documents/upload",{method:"POST",body:t,headers:{"Content-Type":void 0}})},d=j.forwardRef(({className:a,...l},t)=>e.jsx(P.Root,{ref:t,className:D("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...l}));d.displayName=P.Root.displayName;const q=()=>{const a=S(),[l,t]=j.useState(!1),[i,r]=j.useState({skills:"",about:"",availability:"FULL_TIME",preferredWorkType:"REMOTE",portfolio:{GITHUB:"",LINKEDIN:"",LATEST_RESUME:"",PROFILE_PIC:""}}),n=o=>{const{name:s,value:m}=o.target;if(s.startsWith("portfolio.")){const c=s.split(".")[1];r(u=>({...u,portfolio:{...u.portfolio,[c]:m}}))}else r(c=>({...c,[s]:m}))},p=async(o,s)=>{const m=o.target.files[0];if(m)try{const c=await O(m,s);s==="RESUME"?r(u=>({...u,resume:c.externalId,portfolio:{...u.portfolio,LATEST_RESUME:c.externalId}})):s==="PROFILE_PIC"&&r(u=>({...u,portfolio:{...u.portfolio,PROFILE_PIC:c.externalId}})),x.success(`${s==="RESUME"?"Resume":"Profile picture"} uploaded successfully`)}catch(c){x.error(`Failed to upload ${s==="RESUME"?"resume":"profile picture"}`),console.error("Upload error:",c)}},y=async o=>{o.preventDefault(),t(!0);try{await M(i),x.success("Developer profile created successfully"),a("/developer/dashboard")}catch(s){x.error("Failed to create developer profile"),console.error("Profile creation error:",s)}finally{t(!1)}};return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:e.jsxs(R,{children:[e.jsx(N,{children:e.jsx(k,{children:"Create Developer Profile"})}),e.jsx(F,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"skills",children:"Skills (comma separated)"}),e.jsx(f,{id:"skills",name:"skills",value:i.skills,onChange:n,placeholder:"e.g., JavaScript, React, Node.js",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"about",children:"About"}),e.jsx(L,{id:"about",name:"about",value:i.about,onChange:n,placeholder:"Tell us about yourself and your experience",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"availability",children:"Availability"}),e.jsxs(T,{value:i.availability,onValueChange:o=>r(s=>({...s,availability:o})),children:[e.jsx(E,{children:e.jsx(I,{placeholder:"Select availability"})}),e.jsxs(b,{children:[e.jsx(h,{value:"FULL_TIME",children:"Full Time"}),e.jsx(h,{value:"PART_TIME",children:"Part Time"}),e.jsx(h,{value:"CONTRACT",children:"Contract"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"preferredWorkType",children:"Preferred Work Type"}),e.jsxs(T,{value:i.preferredWorkType,onValueChange:o=>r(s=>({...s,preferredWorkType:o})),children:[e.jsx(E,{children:e.jsx(I,{placeholder:"Select work type"})}),e.jsxs(b,{children:[e.jsx(h,{value:"REMOTE",children:"Remote"}),e.jsx(h,{value:"HYBRID",children:"Hybrid"}),e.jsx(h,{value:"ONSITE",children:"Onsite"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"github",children:"GitHub Profile"}),e.jsx(f,{id:"github",name:"portfolio.GITHUB",value:i.portfolio.GITHUB,onChange:n,placeholder:"https://github.com/username",type:"url"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"linkedin",children:"LinkedIn Profile"}),e.jsx(f,{id:"linkedin",name:"portfolio.LINKEDIN",value:i.portfolio.LINKEDIN,onChange:n,placeholder:"https://linkedin.com/in/username",type:"url"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"resume",children:"Resume"}),e.jsx(f,{id:"resume",type:"file",accept:".pdf,.doc,.docx",onChange:o=>p(o,"RESUME"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"profilePic",children:"Profile Picture"}),e.jsx(f,{id:"profilePic",type:"file",accept:"image/*",onChange:o=>p(o,"PROFILE_PIC")})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>a("/developer/dashboard"),disabled:l,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:l,children:l?"Creating Profile...":"Create Profile"})]})]})})]})})};export{q as default};
